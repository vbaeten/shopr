<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xml:lang="en" lang="en">

<ui:composition>
    <ui:define name="ratings">


        <h:form id="addReview">
            <p:fieldset legend="Write a review" cellPadding="5">
                <p:panelGrid columns="2" cellPaddinig="5">
                    <h:outputText value="Rating:"/>
                    <p:rating value="#{ratingController.newRating.score}" stars="10"/>

                    <h:outputText value="Comments: "/>
                    <p:inputTextarea rows="10"
                                     cols="100"
                                     value="#{ratingController.newRating.description}"/>
                    <p:commandButton value="Submit"
                                     action="#{ratingController.submit(lpController.newLp.id, userController.currentUser.id)}"
                                     update="ratingsList"/>
                </p:panelGrid>
            </p:fieldset>
        </h:form>

        <p:fieldset id="ratingsList">
            <p:dataList var="rating" value="#{ratingController.getRatingsByArticleId(lpController.lpId)}"
                        emptyMessage="There are no reviews for this article yet."
                        type="definition" >
                #{rating.user.firstName} #{rating.user.name}
                <p:rating value="#{rating.score}" readonly="true" stars="10"/>
                <h:outputText value="#{rating.description}"/>
                <p:separator/>
            </p:dataList>
        </p:fieldset>


    </ui:define>
</ui:composition>

</html>