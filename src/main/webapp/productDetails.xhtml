<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
<h:head><title>ShopR!</title></h:head>
<h:body>
    <f:metadata>
        <f:viewParam name="id" value="#{productDetailsController.id}"/>
        <f:event listener="#{productDetailsController.loadProduct}" type="preRenderView"/>
    </f:metadata>

    <h:form>
        <b:navCommandLink action="shoppingCart.xhtml?faces-redirect=true" value="Shopping cart" />
    </h:form>

    <b:form id="productDetails">
        <b:dataTable value="#{productDetailsController.product}" var="product">
            <b:dataTableColumn value="#{product.id}" />
            <b:dataTableColumn value="#{product.title}" />
            <b:dataTableColumn value="#{product.publisher}"/>
            <b:dataTableColumn value="#{product.price}" />
            <b:dataTableColumn label="Action">
                <b:commandButton immediate="true" action="#{cartController.buy(productDetailsController.id)}" value="buy">
                    <f:param id="id" value="#{param.id}" />
                </b:commandButton>
            </b:dataTableColumn>
        </b:dataTable>

    </b:form>


</h:body>
</html>